# 회원가입 끝! 로그인 시작!


# 로그인
1. 아이디 & 비밀번호 입력
2. 서버에 전송
3. 로그인 성공~


## 이때 비밀번호를 해싱할 필요는 ❌
1. https로 보내면 패킷을 가로채서 까볼 수 없다.
2. 암호화 하더라도 사이트에 입력할 때 털릴 수 있기에 암호화 할 필요가 없다.


# 중요한 것은 인증과 인가!
Authentication & Authorization

- 인증 : 사용자가 누구인지 확인하는 것
- 인가 : 인증된 사용자가 할 수 있는 행동을 제한하는 것


## 서버에 비밀번호가 전달되면
1. 비밀번호 암호화
2. DB의 암호화된 비밀번호와 비교
3. 동일하면 인증 성공!

로그인에 성공 === 앞으로 사용자에게 권한 부여


## 이걸 서버가 어떻게 아나?
1. 세션기반 인증
2. 토큰기반 인증


# 세션 기반 인증
1. (서버) 인증시 세션 생성 저장
2. 클라에 세션ID 전달
3. (클라) 쿠키에 세션ID 저장
    - 브라우저마다 다르게 저장되고, 호환 불가
    - 브라우저를 닫으면 쿠키도 소멸
4. (클라) 요청시 쿠키를 같이 전달
5. (서버) 세션과 비교하여 인가해줌


중요한 정보는 서버에서 가지고 있어서 노출되지 않도록 한다.

## But
1. 로그인 사용자가 늘어나면 서버에 부하가 걸림
2. 확장성 별로...
3. 세션ID로 해킹 시도 가능


# 토큰 기반 인증
세션 기반 인증의 단점을 보완

1. (서버) 일정 기간동안 유효한 토큰 발급
2. (클라) 요청시마다 토큰을 함께 전달
3. (서버) 토큰을 검증하여 인가해줌


서버 리소스를 덜 사용하고, 

서버가 상태를 유지하지 않아도 되기때문에(stateless)

브라우저나 장치를 변경해도 토큰을 이용해 정보를 유지할 수 있다.


<img data-src="/images/token.png">
